#! /usr/bin/env python

from optparse import OptionParser
import substrate

def main():
    usage = "usage: %prog [options] command directory"
    
    parser = OptionParser(usage)

    (options, args) = parser.parse_args()

    if len(args) != 2:
        parser.error("incorrect number of arguments")

    cmd = args[0]
    directory = args[1]

    command = getattr(substrate, cmd, None)

    if command:
        command(directory)
    else:
        parser.error("unknown command %s" % cmd)

if __name__ == '__main__':
    main()
    
